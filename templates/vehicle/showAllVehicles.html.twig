{% extends 'base.html.twig' %}

{% block title %}Mes véhicules
{% endblock %}

{% block stylesheets %}
	<style>
		/* Global Style */
		body {
			font-family: Arial, sans-serif;
			background-color: white;
		}

		.all-vehicles-container {
			width: 100vw;
			display: flex;
			justify-content: center;
		}

		/* Search Bar Section */
		.search-header {
			display: flex;
			flex-direction: column;
			gap: 20px;
			width: 100vw;
		}

		.search-header div {
			display: flex;
		}
		.search-header .search-header-input {
			width: 1043px;
			gap: 50px;
		}

		.search-header-input,
		.filters {
			margin-left: 20px;
		}
		.search-header input {
			width: 100%;
			padding: 10px;
			border: 1px solid #ddd;
			border-radius: 5px;
			font-size: 16px;
		}

		.date-container {
			display: flex;
			gap: 20px;
		}

		.filters {
			display: flex;
			gap: 10px;
			border-bottom: 1px #ddd solid;
			border-top: 1px #ddd solid;
			padding: 10px 0;
		}

		.filter-btn {
			padding: 10px 20px;
			background-color: white;
			border: 1px solid #ddd;
			border-radius: 5px;
			cursor: pointer;
			transition: background-color 0.3s ease;
		}

		.filter-btn:hover {
			background-color: #f1f1f1;
		}

		/* Main Content Section */
		.main-container {
			width: 100%;
			height: 610px;
			display: flex;
			gap: 20px;
			padding: 0 20px;
		}

		/* Vehicle List */
		.vehicle-list {
			flex: 2;
			display: flex;
			flex-direction: column;
			gap: 20px;
			padding: 20px;
			max-height: 600px;
			overflow-y: auto;
		}

		.vehicle-item {
			background-color: white;
			border-radius: 10px;
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
			padding: 20px;
			transition: transform 0.2s, box-shadow 0.2s;
			display: flex;
			align-items: center;
			gap: 20px;
		}

		.vehicle-item:hover {
			transform: scale(1.02);
			box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
		}

		.vehicle-info {
			flex-grow: 1;
		}

		.vehicle-info h3 {
			font-size: 18px;
			margin-bottom: 10px;
			color: #282F4B;
		}

		.vehicle-info p {
			margin: 5px 0;
			color: #555;
		}

		.vehicle-info strong {
			color: #282F4B;
		}

		.reserve-button {
			padding: 10px 20px;
			background-color: #EB8072;
			color: white;
			border-radius: 5px;
			text-decoration: none;
			font-weight: bold;
			transition: background-color 0.3s ease;
		}

		.reserve-button:hover {
			background-color: #d96d61;
		}

		/* Right-side Blue Placeholder */
		.blue-box {
			flex: 3;
			background-color: #007bff;
			height: 616px;
			display: flex;
			justify-content: center;
			align-items: center;
			color: white;
			font-size: 24px;
		}

		/* Dark blue image placeholder */
		.vehicle-image-placeholder {
			width: 180px;
			height: 120px;
			background-color: #282F4B; /* Dark blue color */
			border-radius: 10px;
		}

		/* Stars and Rating */
		.vehicle-rating {
			display: flex;
			align-items: center;
			margin-bottom: 10px;
		}

		.vehicle-rating .stars {
			color: #f5b50a;
			font-size: 18px;
			margin-right: 5px;
		}

		.vehicle-rating span {
			font-size: 14px;
			color: #555;
		}

		/* Vehicle Details */
		.vehicle-details {
			display: flex;
			gap: 10px;
			color: #555;
			font-size: 14px;
			margin-bottom: 10px;
		}

		/* City Info */
		.vehicle-info p {
			color: #007bff;
			font-weight: bold;
			margin: 0;
		}

		/* Price Section */
		.vehicle-price {
			display: flex;
			align-items: center;
			justify-content: center;
			background-color: #EB8072;
			color: white;
			padding: 10px 20px;
			border-radius: 10px;
			font-weight: bold;
			font-size: 18px;
		}

		.vehicle-price:hover {
			background-color: #d96d61;
		}
	</style>
{% endblock %}

{% block body %}
	<main class="all-vehicles-container">
		<div class="search-header">
			<div class="search-header-input">

				{{ form_start(searchForm) }}
				<div class="form-group">
					{{ form_label(searchForm.search) }}
					{{ form_widget(searchForm.search, {'attr': {'class': 'search-input'}}) }}
					{{ form_errors(searchForm.search) }}
				</div>
				{# <input type="text" placeholder="Adresse précise, gare, métro..." class="search-input"> #}
				<div class="date-container">
					<div class="form-group">
						{{ form_label(searchForm.startDate) }}
						{{ form_widget(searchForm.startDate, {'attr': {'class': 'search-input'}}) }}
						{{ form_errors(searchForm.startDate) }}
					</div>
					<div class="form-group">
						{{ form_label(searchForm.endDate) }}
						{{ form_widget(searchForm.endDate, {'attr': {'class': 'search-input'}}) }}
						{{ form_errors(searchForm.endDate) }}
					</div>
					{# <input type="date" placeholder="début" class="search-input">
																																													<input type="date" placeholder="fin" class="search-input"> #}
				</div>
			</div>


			<div class="filters">
				<div class="form-group">
					{{ form_label(searchForm.totalPrice) }}
					{{ form_widget(searchForm.totalPrice, {'attr': {'class': 'filter-btn'}}) }}
					{{ form_errors(searchForm.totalPrice) }}
				</div>
				<div class="form-group">
					{{ form_label(searchForm.vehicleCategory) }}
					{{ form_widget(searchForm.vehicleCategory, {'attr': {'class': 'filter-btn'}}) }}
					{{ form_errors(searchForm.vehicleCategory) }}
				</div>
				<div class="form-group">
					{{ form_label(searchForm.gearboxType) }}
					{{ form_widget(searchForm.gearboxType, {'attr': {'class': 'filter-btn'}}) }}
					{{ form_errors(searchForm.gearboxType) }}
				</div>

				<div class="form-group">
					{{ form_label(searchForm.fuelType) }}
					{{ form_widget(searchForm.fuelType, {'attr': {'class': 'filter-btn'}}) }}
					{{ form_errors(searchForm.fuelType) }}
				</div>
				<div class="form-group">
					<button type="submit" class="filter-btn">Rechercher</button>
				</div>

				{# <button class="filter-btn">Prix total</button>
																												<button class="filter-btn">Citadine</button>
																												<button class="filter-btn">Type de véhicule</button>
																												<button class="filter-btn">Plus de filtres</button> #}
			</div>

			{{ form_end(searchForm) }}
		</div>

		<div
			class="main-container">
			<!-- Left-side: Vehicle List -->
			<div class="vehicle-list">
				{% if vehicles is empty %}
					<p class="no-vehicles">Il n'y a aucun véhicule disponible</p>
				{% else %}
					{% for vehicle in vehicles %}

						<a
							href="{{ path('app_vehicle_show', { 'id': vehicle.id }) }}" class="vehicle-item">
							<!-- Placeholder for vehicle image -->
							<div class="vehicle-image-placeholder"></div>

							<!-- Vehicle info section -->
							<div class="vehicle-info">
								<h3>{{ vehicle.model.name }}</h3>
								<div class="vehicle-rating">
									<span class="stars">★★★★★</span>
									<!-- Static stars for now -->
									<span>(22 avis)</span>
								</div>
								<div class="vehicle-details">
									<span>4 places</span>
									<span>{{vehicle.model.vehicleCategory.value}}</span>
									<span>{{vehicle.gearBoxType.value}}</span>
									<span>{{vehicle.fuelType.value}}</span>
								</div>
								<p>
									<strong>{{ vehicle.city }}</strong>
								</p>
							</div>

							<!-- Price per day -->
							<div>
							<div class="vehicle-price">
								<span>{{ vehicleTotalPrices[vehicle.id] ?? 0}}€</span>
							</div>
							<span>pour {{days}} jours</span>
							</div>
							
						</a>

					{% endfor %}
				{% endif %}
			</div>

			<!-- Right-side: Blue Placeholder -->
			<div class="blue-box">
				<p>Placeholder for map or other content</p>
			</div>
		</div>
	</main>
{% endblock %}

{% block footer %}{% endblock %}
